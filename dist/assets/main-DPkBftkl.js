(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();const w=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],g=e=>{e.classList.toggle("card__like-button_is-active")},k=e=>{e.remove()},B=()=>document.getElementById("card-template").content.querySelector(".card").cloneNode(!0),h=(e,{onPreviewPicture:t,onLikeIcon:o,onDeleteCard:n})=>{const r=B(),c=r.querySelector(".card__like-button"),l=r.querySelector(".card__control-button_type_delete"),m=r.querySelector(".card__image");return m.src=e.link,m.alt=e.name,r.querySelector(".card__title").textContent=e.name,o&&c.addEventListener("click",()=>o(c)),n&&l.addEventListener("click",()=>n(r)),t&&m.addEventListener("click",()=>t({name:e.name,link:e.link})),r},b=e=>{if(e.key==="Escape"){const t=document.querySelector(".popup_is-opened");s(t)}},d=e=>{e.classList.add("popup_is-opened"),document.addEventListener("keyup",b)},s=e=>{e.classList.remove("popup_is-opened"),document.removeEventListener("keyup",b)},M=e=>{e.querySelector(".popup__close").addEventListener("click",()=>{s(e)}),e.addEventListener("mousedown",o=>{o.target.classList.contains("popup")&&s(e)})},E=document.querySelector(".places__list"),_=document.querySelector(".popup_type_edit"),p=_.querySelector(".popup__form"),F=p.querySelector(".popup__input_type_name"),C=p.querySelector(".popup__input_type_description"),f=document.querySelector(".popup_type_new-card"),i=f.querySelector(".popup__form"),V=i.querySelector(".popup__input_type_card-name"),j=i.querySelector(".popup__input_type_url"),v=document.querySelector(".popup_type_image"),L=v.querySelector(".popup__image"),D=v.querySelector(".popup__caption"),O=document.querySelector(".profile__edit-button"),N=document.querySelector(".profile__add-button"),x=document.querySelector(".profile__title"),I=document.querySelector(".profile__description"),y=document.querySelector(".profile__image"),S=document.querySelector(".popup_type_edit-avatar"),a=S.querySelector(".popup__form"),W=a.querySelector(".popup__input"),A=({name:e,link:t})=>{L.src=t,L.alt=e,D.textContent=e,d(v)},q=e=>{const t=Array.from(e.querySelectorAll("input")),o=e.querySelector("button");o.classList.add("popup__button_disabled"),o.disabled=!0,t.forEach(n=>{n.addEventListener("input",()=>{T(e,n,o)})})};function T(e,t,o){t.validity.valid?z(e,t,o):$(e,t,o)}function $(e,t,o){const n=e.querySelector(`#${t.id}-error`);n&&(n.style.opacity=1,n.textContent=t.validationMessage),t.style.borderBottom="1px solid #ff0000",P(e,o)}function z(e,t,o){const n=e.querySelector(`#${t.id}-error`);n&&(n.style.opacity=0,n.textContent=""),t.style.borderBottom="1px solid rgba(0, 0, 0, .2)",P(e,o)}function P(e,t){const o=Array.from(e.querySelectorAll("input"));u(o)?(t.classList.add("popup__button_disabled"),t.disabled=!0):(t.classList.remove("popup__button_disabled"),t.disabled=!1)}function u(e){return e.some(t=>!t.validity.valid)}const K=e=>{e.preventDefault();const t=Array.from(p.querySelectorAll("input"));!u(t)&&(x.textContent=F.value,I.textContent=C.value,s(_))},U=e=>{e.preventDefault();const t=Array.from(y.querySelectorAll("input"));!u(t)&&(y.style.backgroundImage=`url(${W.value})`,s(S))},G=e=>{e.preventDefault();const t=Array.from(i.querySelectorAll("input"));!u(t)&&(E.prepend(h({name:V.value,link:j.value},{onPreviewPicture:A,onLikeIcon:g,onDeleteCard:k})),s(f))};p.addEventListener("submit",K);i.addEventListener("submit",G);a.addEventListener("submit",U);O.addEventListener("click",()=>{F.value=x.textContent,C.value=I.textContent,d(_),q(p)});y.addEventListener("click",()=>{a.reset(),d(S),q(a)});N.addEventListener("click",()=>{i.reset(),d(f),q(i)});w.forEach(e=>{E.append(h(e,{onPreviewPicture:A,onLikeIcon:g,onDeleteCard:k}))});const H=document.querySelectorAll(".popup");H.forEach(e=>{M(e)});
